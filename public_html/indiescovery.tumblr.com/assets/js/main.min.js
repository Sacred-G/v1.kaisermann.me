function getContentHeight(){return $(window).innerHeight()-$(".header-wrapper").innerHeight()}function totalSlides(){return Math.round($(".slide-gallery .gallery-item").length)}function isFinalPage(){return cur_page>=total_pages}function nextPost(){current_slide+1>=totalSlides()||gotoPost(current_slide+1)}function prevPost(){1>current_slide||gotoPost(current_slide-1)}function loadNextPage(){$.get(blogurl+"page/"+(cur_page+1),function(a){$(a).find(".slide-gallery .gallery-item").each(function(){var a=$("<div />").append($(this).clone()).html();addPost(a,totalSlides()-1)}),activateSlide(current_slide),cur_page++,cur_page===total_pages&&(removePost(totalSlides()-1),loading_removed=!0),isloading=!1,refreshSizes()})}function gotoPost(a){var b=current_slide!==a?a>current_slide?1:-1:0;$(".gallery-item").css("left",-(a*article_size)),current_slide=a,activateSlide(a),isFinalPage()||1!==b||loading_removed!==!1||current_slide!==totalSlides()-1||(isloading=!0,loadNextPage())}function activateSlide(a){$(".slide-gallery .gallery-item").removeClass("post-active").eq(a).addClass("post-active"),$(".post-active").has(".video").length>0?($(".fullscreen-btn").show(),ytloaded&&(console.log("activatin video at "+a),activateVideo())):$(".fullscreen-btn").hide()}function removePost(a){$(".slide-gallery .gallery-item").eq(a).remove(),$(".slide-container").css("width","-="+article_size)}function addPost(a,b){var c=$(a);c.has(".video-wrapper iframe").length&&(fullscreen&&c.addClass("fullscreen"),updateYTSrc(c)),c.find("article").css("max-height",getContentHeight()),"undefined"!=typeof b?(c.css({left:-(current_slide*article_size),width:article_size}),$(".slide-container .gallery-item").eq(b).before(c)):(b=$(".slide-container .gallery-item").length,c.css({left:-(current_slide*article_size),width:article_size}),$(".slide-container").append(c).index()),$(".slide-container").css("width","+="+article_size),c.find("article").hasClass("loading-slider")||post_count++}function refreshSizes(){article_size=$(window).innerWidth(),$(".gallery-item").css("width",article_size),$(".video-wrapper").height(fullscreen?getContentHeight():0),$(".slide-container").css({width:article_size*totalSlides(),"min-height":getContentHeight()}),$("article").css("max-height",getContentHeight())}function initializejQuery(){article_size=$(window).innerWidth(),$(document).ready(function(){$(".gallery-item .video").each(function(){updateYTSrc(this),post_count++}),$(document).keydown(function(a){return 37===a.keyCode?(prevPost(),!1):39===a.keyCode?(nextPost(),!1):void 0}),$("#header .selector").click(function(){$(this).toggleClass("active"),$(this).parent().find(".pop-menu").toggleClass("active")}),$("body").on({mousewheel:function(a){clearTimeout($.data(this,"mousewheelEndCheck")),$.data(this,"mousewheelEndCheck",setTimeout(function(){a.originalEvent.wheelDelta>=0?prevPost():nextPost()},50)),a.preventDefault()}}).on("mousewheel","article",function(a,b){$(this).find(".post-wrapper").height()>parseInt($(this).css("max-height"))&&($(this).scrollTop($(this).scrollTop()-10*b),a.preventDefault(),a.stopPropagation())}).on("click",".ins-prev",prevPost).on("click",".ins-next",nextPost).on("click",".fullscreen-btn",function(){var a=$(".fullscreen-btn");fullscreen=a.hasClass("on")?!1:!0,$(".gallery-item").has(".video").toggleClass("fullscreen"),$(this).toggleClass("off").toggleClass("on"),refreshSizes()}),$(window).resize(function(){refreshSizes(),clearTimeout($.data(this,"resizeEndCheck")),$.data(this,"resizeEndCheck",setTimeout(function(){gotoPost(current_slide)},250))}),total_pages>cur_page?addPost($(".pre-loading").removeClass("pre-loading").detach()):$(".pre-loading").remove(),refreshSizes(),$(".slide-gallery").fadeIn(),gotoPost(0),totalSlides()<2&&$(".ins-prev,.ins-next").hide(),boot.loadScript("https://www.youtube.com/iframe_api")})}function updateYTSrc(a){a=$(a).find(".video-wrapper iframe");var b=a.attr("src");b.indexOf("youtube")>-1&&(a.attr("src",b+"&enablejsapi=1"),a.attr("id","video_"+post_count))}function onYouTubeIframeAPIReady(){ytloaded=!0,activateVideo()}function activateVideo(){isMobile||(void 0===players[current_slide]?players[current_slide]=new YT.Player("video_"+current_slide,{events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}}):playCurrent())}function playCurrent(){1==autoplay&&players[current_slide].playVideo(),autoplay=!1}function onPlayerReady(){console.log("IM READY"),playCurrent()}function onPlayerStateChange(){var a=players[current_slide],b=$(".post-active");switch(a.getPlayerState()){case 1:for(var c=0;c<players.length;c++)c!==current_slide&&players[c].pauseVideo();document.title="â™ª "+b.find("h3").text();break;case 2:document.title="INDIESCOVERY";break;case 0:document.title="INDIESCOVERY",autoplay=!0;do{if(isFinalPage()&&current_slide+1===totalSlides()){gotoPost(0);break}nextPost()}while(0===b.has(".video").length)}}var isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),current_slide=0,prev_slide=-1,loading_removed=!1,fullscreen=!1,ytloaded=!1,players=[],autoplay=!1,isloading=!1,post_count=0,article_size=window.innerWidth;