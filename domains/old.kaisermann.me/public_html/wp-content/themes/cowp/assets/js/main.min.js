var isLoading=!1,lastActive=null,hashframe=null;jQuery(document).ready(function(a){function b(b){a(".menu-item-object-projeto").each(function(){var c=a(this).find("a").attr("href");return c.indexOf(b)>=0?(d(a(this)),a(this).parents("ul").slideDown(),!1):void 0})}function c(){a(".mobile-menu-btn").toggleClass("m-active"),a("nav").toggleClass("m-active")}function d(b){var c=b.hasClass("current-menu-item");if(a(".menu > li.current-menu-item").length&&(lastActive=a(".menu > li.current-menu-item")),!e(c)){b.addClass("current-menu-item");var d=b.find("a").attr("href");f(d)}}function e(b){return a(".current-menu-item").removeClass("current-menu-item"),isLoading?(a("#iframe-projeto").remove(),isLoading=!1):a("#iframe-projeto").slideUp(600,function(){a(this).remove()}),a("#projeto-info.iframed").css("top",-a("#projeto-info").height()).removeClass("iframed"),a("aside,#page-content,#page-wrapper, .content-wrapper").removeClass("iframed"),a("#resolution-controls").removeClass("iframed").find("span").removeClass("active"),a(".spinner-wrapper").fadeOut(),b?(null!=lastActive&&lastActive.addClass("current-menu-item"),!0):!1}function f(b){isLoading=!0,a(".spinner-wrapper").fadeIn(function(){a.get(ajax_request_url,{action:"get_post_ajax",url:b},function(b){isLoading&&(b.error?alert("Ajax error: "+b.error):(a("#projeto-info .desc").html(b.content).append("\n							<div>\n							<p>\n							Área de atuação: "+b.acf.o_que_foi_feito+'\n							</p>\n							</div>\n							<div>\n							<a href="'+b.acf.projeto_url+'" target="_blank">\n							Visualizar projeto (em link externo)\n							</a>\n							</div>').parent().addClass("iframed").css("top",function(){return-a(this).height()+26}),a(window).width()<992?g():(ifr=a("<iframe/>",{id:"iframe-projeto",src:b.acf.projeto_url,style:"width: 100%; height: 100%;",load:function(){g(b.acf.responsivo)}}),a("#iframe-wrapper").append(ifr))))},"json")})}function g(b){void 0===b&&(b=!1),a("aside").css("left",function(){a(this).width()}).addClass("iframed"),a(".spinner-wrapper").fadeOut(),a("#page-wrapper,#page-content, .content-wrapper").addClass("iframed"),b&&a("#resolution-controls").addClass("iframed"),i(a(window).innerWidth(),a("#iframe-projeto").css("max-width")),isLoading=!1,h(),a("html,body").animate({scrollTop:a("#page-content").offset().top},1e3)}function h(){var b=a(window).outerWidth(),c=a("#page-wrapper"),d=a("#page-content"),e=a("#iframe-projeto"),f=(a("#iframe-wrapper"),e.css("max-width"));b>991?(e.css("height","100%"),c.css("height",a(window).height()-a("#wpadminbar").height()),d.css("min-height",c.height()),a("#projeto-info.iframed").css("top",function(){return-a(this).height()+26})):(e.css("min-height",a(window).innerHeight()-a("#projeto-info").innerHeight()-a(".top").outerHeight()-40),c.css("height","auto"),d.css("min-height",0)),i(b,f)}function i(b,c){a("#resolution-controls span").removeClass("active"),480>b||"320px"==c?a("#resolution-controls span:eq(0)").addClass("active"):992>b||"991px"==c?a("#resolution-controls span:eq(1)").addClass("active"):a("#resolution-controls span:eq(2)").addClass("active")}h(),a(window).resize(h),a(".mobile-menu-btn").click(c),a("nav li.menu-item-has-children > a").click(function(b){b.preventDefault(),a(this).parent().toggleClass("active").find("> ul").slideToggle()}),a(".menu-item-object-projeto").click(function(b){b.preventDefault(),d(a(this)),a(window).width()<992&&c()}),a("body").on("click",".plink",function(c){c.preventDefault(),b(a(this).attr("href"))}),a("body").on("click","#projeto-info .close",function(){e(!0)}),a("#resolution-controls span").click(function(){a("#resolution-controls span").removeClass("active");var b=a(this).data("width");a("#iframe-projeto").css("max-width",b),a(this).addClass("active")}),window.location.hash&&(hashframe=window.location.hash.substring(1),b(hashframe)),a(document).ajaxSend(function(a,b,c){"undefined"!=typeof _gaq&&null!==_gaq&&_gaq.push(["_trackPageview",c.url])})});